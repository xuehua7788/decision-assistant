# 📊 股票分析功能使用指南

## ⚠️ 重要提示：API限制

### Alpha Vantage API 免费版限制
- **每分钟最多 5 次请求**
- **每天最多 25 次请求**

### 我们的应用每次搜索消耗
搜索一只股票会调用：
1. 获取股票报价（1次）
2. 获取历史数据（1次）
3. 获取新闻（1次）

**总计：3次API调用 = 1次搜索**

### 缓存机制
为了减少API调用，我们实现了缓存：
- **股票数据**：15分钟缓存
- **新闻数据**：1小时缓存
- **AI分析**：30分钟缓存

**💡 建议：搜索同一只股票时，15分钟内会使用缓存数据，不消耗API配额**

---

## 🎯 使用建议

### 1. 合理规划搜索
- 一次性搜索您关注的股票
- 避免频繁切换股票
- 利用缓存时间（15分钟内重复查看不消耗配额）

### 2. 热门股票快捷按钮
我们提供了5个热门股票的快捷按钮：
- **AAPL** - 苹果
- **GOOGL** - 谷歌
- **MSFT** - 微软
- **TSLA** - 特斯拉
- **NVDA** - 英伟达

### 3. 如果遇到"API限制"错误
**错误提示**：`⚠️ API限制: Thank you for using Alpha Vantage...`

**解决方案**：
1. **等待1分钟**后再试
2. 或者查看已缓存的股票（15分钟内）
3. 如果达到每日25次限制，需等到第二天

---

## 📝 完整使用流程

### 步骤1：搜索股票
1. 输入股票代码（如 `AAPL`）
2. 或点击热门股票按钮
3. 等待数据加载

### 步骤2：查看数据
- **价格卡片**：当前价格、涨跌幅
- **K线图**：30天价格走势
- **关键指标**：最高/最低价、成交量、RSI、波动率
- **新闻列表**：最新相关新闻（带情感分析）

### 步骤3：选择新闻（可选）
- 点击新闻自动填充到"新闻/消息"输入框
- 或手动输入自定义消息

### 步骤4：输入观点（可选）
- 在"您的观点/研报"输入框中输入您的看法
- 例如："我认为该公司基本面良好，技术创新能力强"

### 步骤5：设置风险偏好
- **保守**：适合稳健投资者
- **平衡**：适合大多数投资者
- **激进**：适合高风险偏好者

### 步骤6：开始AI分析
- 点击 **"🤖 开始AI综合分析"** 按钮
- AI会综合考虑：
  - 技术指标（RSI、价格走势、波动率）
  - 新闻消息（如果提供）
  - 您的观点（如果提供）
  - 风险偏好

### 步骤7：查看分析结果
- **综合评分**：0-100分
- **操作建议**：买入/观望/卖出
- **关键参数**：建议仓位、目标价、止损价
- **分析要点**：3-4条详细说明
- **期权策略**：推荐的期权交易策略（如果适用）

---

## 🔧 故障排除

### 问题1：搜索失败
**可能原因**：
- API限制（每分钟5次）
- 无效的股票代码
- 网络连接问题

**解决方案**：
1. 检查股票代码是否正确（必须是美股代码）
2. 等待1分钟后重试
3. 检查网络连接

### 问题2：AI分析失败
**可能原因**：
- DeepSeek API密钥错误
- API限制

**解决方案**：
1. 联系管理员检查API配置
2. 稍后重试

### 问题3：新闻不显示
**可能原因**：
- 该股票暂无相关新闻
- API限制

**解决方案**：
1. 这是正常情况，可以手动输入消息
2. 或等待1分钟后刷新

---

## 💰 升级到付费版（可选）

如果您需要更频繁的查询，可以考虑升级Alpha Vantage：

### 付费版优势
- **每分钟 75 次请求**（Premium）
- **每分钟 600 次请求**（Enterprise）
- 更多数据指标
- 更长历史数据

### 升级步骤
1. 访问：https://www.alphavantage.co/premium/
2. 选择合适的套餐
3. 获取新的API密钥
4. 在Render环境变量中更新 `ALPHA_VANTAGE_KEY`

---

## 📞 技术支持

如有问题，请查看：
- 后端日志：查看详细的API调用信息
- 浏览器控制台：查看前端错误信息

---

**最后更新**：2025-11-01

