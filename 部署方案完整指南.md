# ğŸš€ Decision Assistant éƒ¨ç½²æ–¹æ¡ˆå®Œæ•´æŒ‡å—

> **é¡¹ç›®æ¶æ„ï¼š** å‰åç«¯åˆ†ç¦» (React + FastAPI)  
> **æ›´æ–°æ—¶é—´ï¼š** 2025-10-14  
> **é€‚ç”¨äººç¾¤ï¼š** æ‰€æœ‰å¼€å‘è€…å’Œéƒ¨ç½²äººå‘˜

---

## ğŸ“‹ ç›®å½•

1. [å¿«é€Ÿé€‰æ‹©](#å¿«é€Ÿé€‰æ‹©)
2. [æ–¹æ¡ˆå¯¹æ¯”](#æ–¹æ¡ˆå¯¹æ¯”)
3. [æ¨èæ–¹æ¡ˆè¯¦ç»†æ­¥éª¤](#æ¨èæ–¹æ¡ˆè¯¦ç»†æ­¥éª¤)
4. [é…ç½®æ–‡ä»¶å‡†å¤‡](#é…ç½®æ–‡ä»¶å‡†å¤‡)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ å¿«é€Ÿé€‰æ‹©

æ ¹æ®æ‚¨çš„éœ€æ±‚å¿«é€Ÿé€‰æ‹©æœ€é€‚åˆçš„æ–¹æ¡ˆï¼š

| ä½¿ç”¨åœºæ™¯ | æ¨èæ–¹æ¡ˆ | æœˆæˆæœ¬ | ç‚¹å‡»è·³è½¬ |
|---------|---------|--------|---------|
| ğŸ“ å­¦ä¹ /æµ‹è¯•/ä¸ªäººé¡¹ç›® | **Vercel + Render** | å…è´¹ | [æŸ¥çœ‹](#æ–¹æ¡ˆ1vercel--render-å…è´¹) |
| ğŸ’¼ å°å‹å•†ä¸šé¡¹ç›® | **Vercel + Railway** | $5-10 | [æŸ¥çœ‹](#æ–¹æ¡ˆ2vercel--railway-ä»˜è´¹ç¨³å®š) |
| ğŸ¢ ä¸­å¤§å‹é¡¹ç›® | **Cloudflare Pages + Fly.io** | $3-15 | [æŸ¥çœ‹](#æ–¹æ¡ˆ3cloudflare-pages--flyio-é«˜æ€§ä»·æ¯”) |
| ğŸŒ å›½å†…è®¿é—®ä¼˜åŒ– | **Netlify + Railway + CDN** | $10-20 | [æŸ¥çœ‹](#æ–¹æ¡ˆ4å›½å†…ä¼˜åŒ–æ–¹æ¡ˆ) |
| ğŸ³ å®Œå…¨è‡ªæ‰˜ç®¡ | **Docker + VPS** | $5-20 | [æŸ¥çœ‹](#æ–¹æ¡ˆ5docker--vps-å®Œå…¨æ§åˆ¶) |

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

### å‰ç«¯éƒ¨ç½²å¹³å°å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å›½å†…è®¿é—® |
|-----|---------|------|------|---------|
| **Vercel** | 100 GB/æœˆ | éƒ¨ç½²ç®€å•ï¼ŒGitHubé›†æˆå¥½ | å›½å†…é€Ÿåº¦ä¸€èˆ¬ | â­â­â­ |
| **Netlify** | 100 GB/æœˆ | åŠŸèƒ½ä¸°å¯Œï¼Œè¡¨å•å¤„ç† | æ„å»ºæ—¶é—´é™åˆ¶ | â­â­â­ |
| **Cloudflare Pages** | æ— é™æµé‡ | å…¨çƒCDNï¼Œé€Ÿåº¦å¿« | é…ç½®ç¨å¤æ‚ | â­â­â­â­â­ |
| **GitHub Pages** | å…è´¹ | ç®€å•ç¨³å®š | ä»…é™æ€ï¼Œéœ€åç«¯API | â­â­ |

### åç«¯éƒ¨ç½²å¹³å°å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | ä¼˜ç‚¹ | ç¼ºç‚¹ | ç¨³å®šæ€§ |
|-----|---------|------|------|--------|
| **Render** | 750å°æ—¶/æœˆ | å…è´¹ï¼Œé…ç½®ç®€å• | 15åˆ†é’Ÿä¼‘çœ ï¼Œå†·å¯åŠ¨æ…¢ | â­â­â­ |
| **Railway** | $5è¯•ç”¨ | æ— ä¼‘çœ ï¼Œé€Ÿåº¦å¿« | éœ€è¦ä»˜è´¹($5/æœˆèµ·) | â­â­â­â­â­ |
| **Fly.io** | 3ä¸ªåº”ç”¨å…è´¹ | å…¨çƒéƒ¨ç½²ï¼Œè¾¹ç¼˜è®¡ç®— | é…ç½®å¤æ‚ | â­â­â­â­ |
| **Heroku** | åœæ­¢å…è´¹è®¡åˆ’ | æˆç†Ÿç¨³å®š | æœ€ä½$7/æœˆ | â­â­â­â­ |
| **é˜¿é‡Œäº‘/è…¾è®¯äº‘** | æ–°ç”¨æˆ·ä¼˜æƒ  | å›½å†…é€Ÿåº¦å¿« | éœ€å¤‡æ¡ˆï¼Œé…ç½®å¤æ‚ | â­â­â­â­â­ |

---

## ğŸŒŸ æ¨èæ–¹æ¡ˆè¯¦ç»†æ­¥éª¤

### æ–¹æ¡ˆ1ï¼šVercel + Render (å…è´¹)

**æœ€é€‚åˆï¼š** å­¦ä¹ ã€æµ‹è¯•ã€ä¸ªäººé¡¹ç›®  
**æ€»æˆæœ¬ï¼š** å…è´¹  
**éƒ¨ç½²éš¾åº¦ï¼š** â­â­ (ç®€å•)

#### æ­¥éª¤ 1.1ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

**æ–¹å¼ Aï¼šä½¿ç”¨ Vercel CLIï¼ˆæ¨èï¼‰**

```bash
# 1. å®‰è£… Vercel CLI
npm install -g vercel

# 2. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 3. ç™»å½• Vercel
vercel login

# 4. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

**æ–¹å¼ Bï¼šä½¿ç”¨ GitHub é›†æˆ**

1. è®¿é—® [vercel.com](https://vercel.com)
2. ç‚¹å‡» "Import Project"
3. é€‰æ‹©æ‚¨çš„ GitHub ä»“åº“
4. é…ç½®é¡¹ç›®ï¼š
   ```
   Framework Preset: Create React App
   Root Directory: frontend
   Build Command: npm run build
   Output Directory: build
   ```
5. ç‚¹å‡» "Deploy"

#### æ­¥éª¤ 1.2ï¼šéƒ¨ç½²åç«¯åˆ° Render

1. **æ³¨å†Œå¹¶ç™»å½• Render**
   - è®¿é—® [render.com](https://render.com)
   - ä½¿ç”¨ GitHub è´¦å·ç™»å½•

2. **åˆ›å»º Web Service**
   - ç‚¹å‡» "New +" â†’ "Web Service"
   - é€‰æ‹©æ‚¨çš„ GitHub ä»“åº“
   - é…ç½®å¦‚ä¸‹ï¼š

   ```yaml
   Name: decision-assistant-backend
   Region: Oregon (æˆ–é€‰æ‹©æœ€è¿‘çš„åŒºåŸŸ)
   Branch: main
   
   Root Directory: backend
   Runtime: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: uvicorn app.main:app --host 0.0.0.0 --port $PORT
   
   Instance Type: Free
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**

   åœ¨ Render çš„ "Environment" è®¾ç½®ä¸­æ·»åŠ ï¼š

   ```bash
   DEEPSEEK_API_KEY=sk-ä½ çš„DeepSeekå¯†é’¥
   ALLOWED_ORIGINS=["https://ä½ çš„vercelåŸŸå.vercel.app"]
   ```

4. **ç­‰å¾…éƒ¨ç½²å®Œæˆ**ï¼ˆçº¦3-5åˆ†é’Ÿï¼‰

   éƒ¨ç½²æˆåŠŸåï¼Œå¤åˆ¶æ‚¨çš„åç«¯ URLï¼š
   ```
   https://decision-assistant-backend.onrender.com
   ```

#### æ­¥éª¤ 1.3ï¼šè¿æ¥å‰ç«¯å’Œåç«¯

1. **åœ¨ Vercel æ·»åŠ ç¯å¢ƒå˜é‡**

   - è¿›å…¥ Vercel é¡¹ç›® â†’ Settings â†’ Environment Variables
   - æ·»åŠ ï¼š
     ```
     Name: REACT_APP_API_URL
     Value: https://ä½ çš„åç«¯.onrender.com
     Environments: Production, Preview, Development (å…¨é€‰)
     ```

2. **æ›´æ–°åç«¯ CORS é…ç½®**

   ç¼–è¾‘ `backend/app/core/config.py`ï¼š

   ```python
   allowed_origins: List[str] = [
       "http://localhost:3000",
       "https://ä½ çš„é¡¹ç›®å.vercel.app",
       "https://*.vercel.app",  # å…è®¸æ‰€æœ‰ Vercel é¢„è§ˆéƒ¨ç½²
   ]
   ```

3. **é‡æ–°éƒ¨ç½²**

   - æ¨é€ä»£ç åˆ° GitHubï¼ŒRender ä¼šè‡ªåŠ¨éƒ¨ç½²
   - åœ¨ Vercel ç‚¹å‡» "Redeploy"

#### æ­¥éª¤ 1.4ï¼šæµ‹è¯•éƒ¨ç½²

```bash
# æµ‹è¯•åç«¯
curl https://ä½ çš„åç«¯.onrender.com/health

# åº”è¯¥è¿”å›ï¼š
{"status":"ok"}

# æµ‹è¯•å‰ç«¯
# è®¿é—®ä½ çš„ Vercel URLï¼Œæµ‹è¯•åŠŸèƒ½
```

---

### æ–¹æ¡ˆ2ï¼šVercel + Railway (ä»˜è´¹ï¼Œç¨³å®š)

**æœ€é€‚åˆï¼š** éœ€è¦ç¨³å®šæ€§çš„å•†ä¸šé¡¹ç›®  
**æ€»æˆæœ¬ï¼š** $5-10/æœˆ  
**éƒ¨ç½²éš¾åº¦ï¼š** â­â­ (ç®€å•)

#### æ­¥éª¤ 2.1ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel

åŒ [æ–¹æ¡ˆ1 æ­¥éª¤1.1](#æ­¥éª¤-11éƒ¨ç½²å‰ç«¯åˆ°-vercel)

#### æ­¥éª¤ 2.2ï¼šéƒ¨ç½²åç«¯åˆ° Railway

1. **æ³¨å†Œ Railway**
   - è®¿é—® [railway.app](https://railway.app)
   - ä½¿ç”¨ GitHub è´¦å·ç™»å½•
   - ç»‘å®šæ”¯ä»˜æ–¹å¼ï¼ˆè·å¾— $5 è¯•ç”¨é¢åº¦ï¼‰

2. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Deploy from GitHub repo"
   - é€‰æ‹©æ‚¨çš„ä»“åº“

3. **é…ç½®æœåŠ¡**

   Railway ä¼šè‡ªåŠ¨æ£€æµ‹ï¼Œä½†éœ€è¦è°ƒæ•´ï¼š

   - ç‚¹å‡»é¡¹ç›® â†’ Settings
   - **Root Directory**: `backend`
   - **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

4. **ç¯å¢ƒå˜é‡**

   åœ¨ Variables æ ‡ç­¾æ·»åŠ ï¼š
   ```bash
   DEEPSEEK_API_KEY=sk-ä½ çš„å¯†é’¥
   PORT=8000
   ALLOWED_ORIGINS=["https://ä½ çš„vercelåŸŸå.vercel.app"]
   ```

5. **ç”ŸæˆåŸŸå**
   - ç‚¹å‡» Settings â†’ Generate Domain
   - å¤åˆ¶ç”Ÿæˆçš„ URL

6. **è¿æ¥å‰ç«¯**
   - åœ¨ Vercel æ·»åŠ ç¯å¢ƒå˜é‡ `REACT_APP_API_URL`
   - å€¼ä¸º Railway ç”Ÿæˆçš„ URL

**Railway ä¼˜åŠ¿ï¼š**
- âœ… æ— ä¼‘çœ ï¼Œå§‹ç»ˆåœ¨çº¿
- âœ… å†·å¯åŠ¨å¿«
- âœ… è‡ªåŠ¨æ‰©å±•
- âœ… å†…ç½® PostgreSQL æ”¯æŒ

---

### æ–¹æ¡ˆ3ï¼šCloudflare Pages + Fly.io (é«˜æ€§ä»·æ¯”)

**æœ€é€‚åˆï¼š** éœ€è¦å…¨çƒè®¿é—®é€Ÿåº¦çš„é¡¹ç›®  
**æ€»æˆæœ¬ï¼š** $3-5/æœˆï¼ˆåç«¯ï¼‰+ å…è´¹ï¼ˆå‰ç«¯ï¼‰  
**éƒ¨ç½²éš¾åº¦ï¼š** â­â­â­ (ä¸­ç­‰)

#### æ­¥éª¤ 3.1ï¼šéƒ¨ç½²å‰ç«¯åˆ° Cloudflare Pages

1. **å‡†å¤‡å·¥ä½œ**

   ```bash
   cd frontend
   npm run build
   ```

2. **ä½¿ç”¨ Wrangler CLI éƒ¨ç½²**

   ```bash
   # å®‰è£… Wrangler
   npm install -g wrangler

   # ç™»å½• Cloudflare
   wrangler login

   # éƒ¨ç½²
   wrangler pages deploy build
   ```

   æˆ–è€…ä½¿ç”¨ **GitHub é›†æˆ**ï¼š
   - è®¿é—® Cloudflare Dashboard
   - Pages â†’ Create a project
   - è¿æ¥ GitHub ä»“åº“
   - é…ç½®ï¼š
     ```
     Build command: cd frontend && npm run build
     Build output directory: frontend/build
     ```

#### æ­¥éª¤ 3.2ï¼šéƒ¨ç½²åç«¯åˆ° Fly.io

1. **å®‰è£… Fly CLI**

   Windows (PowerShell):
   ```powershell
   iwr https://fly.io/install.ps1 -useb | iex
   ```

   Mac/Linux:
   ```bash
   curl -L https://fly.io/install.sh | sh
   ```

2. **ç™»å½• Fly.io**

   ```bash
   fly auth login
   ```

3. **åˆ›å»º fly.toml é…ç½®**

   åœ¨ `backend/` ç›®å½•åˆ›å»º `fly.toml`ï¼š

   ```toml
   app = "decision-assistant-backend"
   primary_region = "sin"  # æ–°åŠ å¡ï¼Œæˆ–é€‰æ‹©å…¶ä»–åŒºåŸŸ

   [build]
     dockerfile = "Dockerfile"

   [env]
     PORT = "8000"

   [http_service]
     internal_port = 8000
     force_https = true
     auto_stop_machines = true
     auto_start_machines = true
     min_machines_running = 0

   [[vm]]
     cpu_kind = "shared"
     cpus = 1
     memory_mb = 256
   ```

4. **éƒ¨ç½²**

   ```bash
   cd backend
   fly launch --no-deploy  # åˆ›å»ºåº”ç”¨
   fly secrets set DEEPSEEK_API_KEY=sk-ä½ çš„å¯†é’¥
   fly deploy  # éƒ¨ç½²
   ```

5. **è·å– URL**

   ```bash
   fly status
   ```

   URL æ ¼å¼ï¼š`https://decision-assistant-backend.fly.dev`

#### æ­¥éª¤ 3.3ï¼šè¿æ¥å‰ç«¯å’Œåç«¯

åœ¨ Cloudflare Pages é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
```
REACT_APP_API_URL=https://ä½ çš„åº”ç”¨.fly.dev
```

**ä¼˜åŠ¿ï¼š**
- âœ… Cloudflare å…¨çƒ CDNï¼Œå›½å†…å¤–è®¿é—®éƒ½å¿«
- âœ… Fly.io æ”¯æŒè¾¹ç¼˜éƒ¨ç½²
- âœ… è‡ªåŠ¨ HTTPS
- âœ… æˆæœ¬ä½

---

### æ–¹æ¡ˆ4ï¼šå›½å†…ä¼˜åŒ–æ–¹æ¡ˆ

**æœ€é€‚åˆï¼š** ä¸»è¦æœåŠ¡å›½å†…ç”¨æˆ·çš„é¡¹ç›®  
**æ€»æˆæœ¬ï¼š** $10-20/æœˆ  
**éƒ¨ç½²éš¾åº¦ï¼š** â­â­â­â­ (è¾ƒå¤æ‚)

#### æ¶æ„è®¾è®¡

```
ç”¨æˆ· â†’ CDN (é˜¿é‡Œäº‘/è…¾è®¯äº‘) â†’ å‰ç«¯ (Netlify/Vercel)
                              â†“
ç”¨æˆ· â†’ API ç½‘å…³ â†’ åç«¯ (è…¾è®¯äº‘ Serverless/é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—)
```

#### é€‰é¡¹ Aï¼šä½¿ç”¨å›½å†…äº‘æœåŠ¡å•†

1. **å‰ç«¯ï¼šé˜¿é‡Œäº‘ OSS + CDN**
   
   ```bash
   cd frontend
   npm run build
   
   # ä½¿ç”¨é˜¿é‡Œäº‘ CLI ä¸Šä¼ 
   ossutil cp -r build/ oss://your-bucket/
   ```

2. **åç«¯ï¼šé˜¿é‡Œäº‘å‡½æ•°è®¡ç®—**
   
   åˆ›å»º `backend/s.yaml`ï¼š
   ```yaml
   edition: 1.0.0
   name: decision-assistant
   access: default
   
   services:
     api:
       component: fc
       props:
         region: cn-hangzhou
         service:
           name: decision-api
         function:
           name: main
           runtime: python3.9
           codeUri: ./
           handler: app.main.handler
           timeout: 60
           memorySize: 512
           environmentVariables:
             DEEPSEEK_API_KEY: ${env.DEEPSEEK_API_KEY}
         triggers:
           - name: httpTrigger
             type: http
             config:
               authType: anonymous
               methods:
                 - GET
                 - POST
   ```

   éƒ¨ç½²ï¼š
   ```bash
   s deploy
   ```

#### é€‰é¡¹ Bï¼šä½¿ç”¨ Vercel + Railway + CDN

1. å‰ç«¯éƒ¨ç½²åˆ° Vercelï¼ˆåŒæ–¹æ¡ˆ1ï¼‰
2. åç«¯éƒ¨ç½²åˆ° Railwayï¼ˆåŒæ–¹æ¡ˆ2ï¼‰
3. é…ç½® CDNï¼š
   - ä½¿ç”¨åˆæ‹äº‘ã€ä¸ƒç‰›äº‘ç­‰
   - ç¼“å­˜é™æ€èµ„æº
   - åŠ é€Ÿ API è¯·æ±‚

---

### æ–¹æ¡ˆ5ï¼šDocker + VPS (å®Œå…¨æ§åˆ¶)

**æœ€é€‚åˆï¼š** éœ€è¦å®Œå…¨æ§åˆ¶çš„é¡¹ç›®  
**æ€»æˆæœ¬ï¼š** $5-20/æœˆï¼ˆVPSè´¹ç”¨ï¼‰  
**éƒ¨ç½²éš¾åº¦ï¼š** â­â­â­â­â­ (å¤æ‚)

#### æ­¥éª¤ 5.1ï¼šå‡†å¤‡ VPS

æ¨èæœåŠ¡å•†ï¼š
- **å›½å¤–ï¼š** DigitalOcean, Linode, Vultr
- **å›½å†…ï¼š** é˜¿é‡Œäº‘è½»é‡åº”ç”¨æœåŠ¡å™¨, è…¾è®¯äº‘

#### æ­¥éª¤ 5.2ï¼šæœåŠ¡å™¨é…ç½®

```bash
# 1. è¿æ¥åˆ°æœåŠ¡å™¨
ssh root@your-server-ip

# 2. å®‰è£… Docker
curl -fsSL https://get.docker.com | sh
sudo systemctl start docker
sudo systemctl enable docker

# 3. å®‰è£… Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 4. å®‰è£… Nginx
sudo apt update
sudo apt install nginx -y

# 5. å®‰è£… Certbotï¼ˆSSLè¯ä¹¦ï¼‰
sudo apt install certbot python3-certbot-nginx -y
```

#### æ­¥éª¤ 5.3ï¼šéƒ¨ç½²åº”ç”¨

1. **å…‹éš†ä»£ç **

   ```bash
   git clone https://github.com/your-username/decision-assistant.git
   cd decision-assistant
   ```

2. **åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶**

   åˆ›å»º `backend/.env`ï¼š
   ```bash
   DEEPSEEK_API_KEY=sk-ä½ çš„å¯†é’¥
   ALLOWED_ORIGINS=["https://ä½ çš„åŸŸå.com"]
   ```

3. **æ„å»ºå¹¶å¯åŠ¨**

   ```bash
   docker-compose up -d
   ```

4. **é…ç½® Nginx**

   åˆ›å»º `/etc/nginx/sites-available/decision-assistant`ï¼š

   ```nginx
   server {
       listen 80;
       server_name ä½ çš„åŸŸå.com;

       # å‰ç«¯
       location / {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection 'upgrade';
           proxy_set_header Host $host;
           proxy_cache_bypass $http_upgrade;
       }

       # åç«¯ API
       location /api {
           proxy_pass http://localhost:8000;
           proxy_http_version 1.1;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       }
   }
   ```

   å¯ç”¨é…ç½®ï¼š
   ```bash
   sudo ln -s /etc/nginx/sites-available/decision-assistant /etc/nginx/sites-enabled/
   sudo nginx -t
   sudo systemctl reload nginx
   ```

5. **é…ç½® SSL**

   ```bash
   sudo certbot --nginx -d ä½ çš„åŸŸå.com
   ```

6. **è®¾ç½®è‡ªåŠ¨æ›´æ–°**

   åˆ›å»º `update.sh`ï¼š
   ```bash
   #!/bin/bash
   cd /root/decision-assistant
   git pull
   docker-compose down
   docker-compose up -d --build
   ```

   è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š
   ```bash
   chmod +x update.sh
   crontab -e
   # æ·»åŠ ï¼šæ¯å¤©å‡Œæ™¨3ç‚¹æ›´æ–°
   0 3 * * * /root/decision-assistant/update.sh >> /var/log/update.log 2>&1
   ```

---

## ğŸ”§ é…ç½®æ–‡ä»¶å‡†å¤‡

### 1. æ›´æ–°å‰ç«¯ API åœ°å€

ç¼–è¾‘ `frontend/src/App.js`ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```javascript
const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';
```

### 2. æ›´æ–°åç«¯ CORS

ç¼–è¾‘ `backend/app/core/config.py`ï¼š

```python
import os

class Settings(BaseSettings):
    # ... å…¶ä»–é…ç½® ...
    
    allowed_origins: List[str] = [
        "http://localhost:3000",
        os.getenv("FRONTEND_URL", ""),
    ]
    
    # æˆ–è€…ä»ç¯å¢ƒå˜é‡ç›´æ¥è¯»å–åˆ—è¡¨
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        if os.getenv("ALLOWED_ORIGINS"):
            import json
            self.allowed_origins = json.loads(os.getenv("ALLOWED_ORIGINS"))
```

### 3. åˆ›å»º Railway é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `railway.json`ï¼š

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "cd backend && uvicorn app.main:app --host 0.0.0.0 --port $PORT",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### 4. åˆ›å»º Fly.io é…ç½®æ–‡ä»¶

åœ¨ `backend/` ç›®å½•åˆ›å»º `fly.toml`ï¼ˆè§æ–¹æ¡ˆ3ï¼‰

### 5. åˆ›å»ºå¥åº·æ£€æŸ¥æ–‡ä»¶

ç¡®ä¿ `backend/app/main.py` æœ‰å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼š

```python
@app.get("/health")
async def health_check():
    return {
        "status": "healthy",
        "service": "backend",
        "ai": "DeepSeek" if settings.deepseek_api_key else "Not configured"
    }
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•é€‰æ‹©æœ€é€‚åˆæˆ‘çš„æ–¹æ¡ˆï¼Ÿ

**ä¸ªäººå­¦ä¹ /æµ‹è¯•é¡¹ç›®ï¼š**
â†’ é€‰æ‹© **æ–¹æ¡ˆ1 (Vercel + Render å…è´¹)**

**å°å‹å•†ä¸šé¡¹ç›®ï¼ˆå¸Œæœ›ç¨³å®šï¼‰ï¼š**
â†’ é€‰æ‹© **æ–¹æ¡ˆ2 (Vercel + Railway)**

**éœ€è¦å…¨çƒå¿«é€Ÿè®¿é—®ï¼š**
â†’ é€‰æ‹© **æ–¹æ¡ˆ3 (Cloudflare + Fly.io)**

**ä¸»è¦æœåŠ¡å›½å†…ç”¨æˆ·ï¼š**
â†’ é€‰æ‹© **æ–¹æ¡ˆ4 (å›½å†…äº‘æœåŠ¡)**

**éœ€è¦å®Œå…¨æ§åˆ¶ã€è‡ªå®šä¹‰éœ€æ±‚å¤šï¼š**
â†’ é€‰æ‹© **æ–¹æ¡ˆ5 (Docker + VPS)**

### Q2: Render å…è´¹ç‰ˆçš„ä¼‘çœ é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ

**é—®é¢˜ï¼š** 15åˆ†é’Ÿæ— æ´»åŠ¨ä¼šä¼‘çœ ï¼Œé¦–æ¬¡è®¿é—®éœ€è¦30-60ç§’å”¤é†’

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä½¿ç”¨å®šæ—¶ Ping æœåŠ¡**
   - [Uptime Robot](https://uptimerobot.com) (å…è´¹)
   - [Cron-job.org](https://cron-job.org) (å…è´¹)
   - è®¾ç½®æ¯5-10åˆ†é’Ÿè®¿é—®ä¸€æ¬¡ `/health` ç«¯ç‚¹

2. **å‡çº§åˆ°ä»˜è´¹ç‰ˆ** ($7/æœˆ)
   - æ— ä¼‘çœ 
   - æ›´å¤šèµ„æº

3. **åˆ‡æ¢åˆ° Railway**
   - æ— ä¼‘çœ é—®é¢˜
   - $5/æœˆèµ·

### Q3: å¦‚ä½•å¤„ç†ç¯å¢ƒå˜é‡ï¼Ÿ

**å‰ç«¯ï¼ˆReactï¼‰ï¼š**
- å¿…é¡»ä»¥ `REACT_APP_` å¼€å¤´
- åœ¨æ„å»ºæ—¶æ³¨å…¥
- ç¤ºä¾‹ï¼š`REACT_APP_API_URL`

**åç«¯ï¼ˆFastAPIï¼‰ï¼š**
- ä½¿ç”¨ `.env` æ–‡ä»¶æˆ–å¹³å°ç¯å¢ƒå˜é‡
- é€šè¿‡ `pydantic-settings` è¯»å–
- æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API Keyï¼‰åªå­˜å‚¨åœ¨åç«¯

### Q4: æ•°æ®æŒä¹…åŒ–é—®é¢˜

**é—®é¢˜ï¼š** Render/Railway å…è´¹ç‰ˆå¯èƒ½åœ¨é‡å¯æ—¶ä¸¢å¤±æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä½¿ç”¨æ•°æ®åº“**ï¼ˆæ¨èï¼‰
   ```python
   # æ”¹ç”¨ SQLite/PostgreSQL å­˜å‚¨èŠå¤©è®°å½•
   # è€Œä¸æ˜¯ JSON æ–‡ä»¶
   ```

2. **ä½¿ç”¨å¯¹è±¡å­˜å‚¨**
   - AWS S3
   - Cloudflare R2
   - é˜¿é‡Œäº‘ OSS

3. **ä½¿ç”¨ Render Disks**ï¼ˆä»˜è´¹åŠŸèƒ½ï¼‰

### Q5: CORS é”™è¯¯å¦‚ä½•è§£å†³ï¼Ÿ

**ç—‡çŠ¶ï¼š** æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º CORS é”™è¯¯

**æ£€æŸ¥æ¸…å•ï¼š**

1. âœ… åç«¯ `allowed_origins` åŒ…å«å‰ç«¯åŸŸå
2. âœ… å‰ç«¯ä½¿ç”¨æ­£ç¡®çš„åç«¯ URL
3. âœ… åç«¯ CORS ä¸­é—´ä»¶é…ç½®æ­£ç¡®
4. âœ… å¦‚æœä½¿ç”¨ Vercel é¢„è§ˆéƒ¨ç½²ï¼Œæ·»åŠ  `https://*.vercel.app`

**è°ƒè¯•å‘½ä»¤ï¼š**
```bash
# æµ‹è¯• CORS
curl -H "Origin: https://ä½ çš„å‰ç«¯åŸŸå" \
     -H "Access-Control-Request-Method: POST" \
     -H "Access-Control-Request-Headers: Content-Type" \
     -X OPTIONS \
     https://ä½ çš„åç«¯URL/api/endpoint
```

### Q6: å¦‚ä½•ç›‘æ§åº”ç”¨çŠ¶æ€ï¼Ÿ

**å…è´¹ç›‘æ§å·¥å…·ï¼š**

1. **Uptime Robot** - ç›‘æ§å¯ç”¨æ€§
2. **Sentry** - é”™è¯¯è¿½è¸ª
3. **LogRocket** - å‰ç«¯æ€§èƒ½ç›‘æ§
4. **Datadog** - ç»¼åˆç›‘æ§ï¼ˆæœ‰å…è´¹é¢åº¦ï¼‰

**é›†æˆ Sentry ç¤ºä¾‹ï¼š**

```python
# backend/app/main.py
import sentry_sdk

sentry_sdk.init(
    dsn="ä½ çš„Sentry DSN",
    traces_sample_rate=1.0,
)
```

### Q7: éƒ¨ç½²å API è¯·æ±‚å¤±è´¥

**æ£€æŸ¥æ­¥éª¤ï¼š**

1. **æµ‹è¯•åç«¯æ˜¯å¦è¿è¡Œ**
   ```bash
   curl https://ä½ çš„åç«¯URL/health
   ```

2. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**
   - æŸ¥çœ‹ Network æ ‡ç­¾
   - æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯

3. **æ£€æŸ¥ç¯å¢ƒå˜é‡**
   - Vercel: `REACT_APP_API_URL` æ˜¯å¦æ­£ç¡®
   - Render/Railway: `DEEPSEEK_API_KEY` æ˜¯å¦è®¾ç½®

4. **æŸ¥çœ‹åç«¯æ—¥å¿—**
   - Render: åœ¨ä»ªè¡¨æ¿æŸ¥çœ‹ Logs
   - Railway: åœ¨é¡¹ç›®é¡µé¢æŸ¥çœ‹ Logs

### Q8: å¦‚ä½•å®ç° HTTPSï¼Ÿ

**æ‰€æœ‰æ¨èæ–¹æ¡ˆéƒ½è‡ªåŠ¨æä¾› HTTPSï¼š**

- âœ… Vercel: è‡ªåŠ¨ HTTPS
- âœ… Render: è‡ªåŠ¨ HTTPS
- âœ… Railway: è‡ªåŠ¨ HTTPS
- âœ… Fly.io: è‡ªåŠ¨ HTTPS
- âœ… Cloudflare Pages: è‡ªåŠ¨ HTTPS

**VPS éƒ¨ç½²ï¼š**
ä½¿ç”¨ Certbotï¼ˆè§æ–¹æ¡ˆ5ï¼‰

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”æ€»ç»“

| æ–¹æ¡ˆ | å‰ç«¯ | åç«¯ | æœˆæˆæœ¬ | é€‚ç”¨è§„æ¨¡ |
|-----|------|------|--------|---------|
| **æ–¹æ¡ˆ1** | Vercel å…è´¹ | Render å…è´¹ | $0 | ä¸ªäºº/æµ‹è¯• |
| **æ–¹æ¡ˆ2** | Vercel å…è´¹ | Railway | $5-10 | å°å‹å•†ä¸š |
| **æ–¹æ¡ˆ3** | Cloudflare å…è´¹ | Fly.io | $3-5 | ä¸­å‹é¡¹ç›® |
| **æ–¹æ¡ˆ4** | é˜¿é‡Œäº‘ OSS | é˜¿é‡Œäº‘å‡½æ•° | $10-20 | å›½å†…ç”¨æˆ·ä¸ºä¸» |
| **æ–¹æ¡ˆ5** | è‡ªæ‰˜ç®¡ | è‡ªæ‰˜ç®¡ | $5-20 | éœ€è¦å®Œå…¨æ§åˆ¶ |

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

å®Œæˆéƒ¨ç½²åï¼Œè¯·æ£€æŸ¥ï¼š

### å‰ç«¯
- [ ] å‰ç«¯æˆåŠŸéƒ¨ç½²åˆ°é€‰æ‹©çš„å¹³å°
- [ ] å¯ä»¥è®¿é—®å‰ç«¯ URL
- [ ] é¡µé¢æ­£å¸¸æ˜¾ç¤ºï¼Œæ— ç™½å±
- [ ] ç¯å¢ƒå˜é‡ `REACT_APP_API_URL` å·²è®¾ç½®

### åç«¯
- [ ] åç«¯æˆåŠŸéƒ¨ç½²
- [ ] `/health` ç«¯ç‚¹è¿”å›æ­£å¸¸
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆç‰¹åˆ«æ˜¯ `DEEPSEEK_API_KEY`ï¼‰
- [ ] åç«¯æ—¥å¿—æ— é”™è¯¯

### è¿æ¥æ€§
- [ ] CORS é…ç½®æ­£ç¡®
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ—  CORS é”™è¯¯
- [ ] API è¯·æ±‚æˆåŠŸï¼ˆNetwork æ ‡ç­¾æ˜¾ç¤º 200ï¼‰
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼š
  - [ ] Decision Analysis
  - [ ] Chat Mode
  - [ ] Chat Viewer

### æ€§èƒ½
- [ ] å‰ç«¯åŠ è½½é€Ÿåº¦ < 3ç§’
- [ ] API å“åº”æ—¶é—´ < 2ç§’
- [ ] æ— æ˜æ˜¾å¡é¡¿

### å®‰å…¨
- [ ] HTTPS å·²å¯ç”¨
- [ ] API Key æœªæš´éœ²åœ¨å‰ç«¯
- [ ] CORS åªå…è®¸æŒ‡å®šåŸŸå

---

## ğŸ¯ æ¨èçš„éƒ¨ç½²æµç¨‹

æ— è®ºé€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºæ“ä½œï¼š

```mermaid
graph TD
    A[1. å‡†å¤‡ä»£ç ] --> B[2. éƒ¨ç½²åç«¯]
    B --> C[3. æµ‹è¯•åç«¯ API]
    C --> D[4. é…ç½®ç¯å¢ƒå˜é‡]
    D --> E[5. éƒ¨ç½²å‰ç«¯]
    E --> F[6. è¿æ¥å‰åç«¯]
    F --> G[7. å®Œæ•´æµ‹è¯•]
    G --> H[8. ç›‘æ§å’Œä¼˜åŒ–]
```

### è¯¦ç»†æ­¥éª¤

1. **å‡†å¤‡ä»£ç **
   - ç¡®ä¿æœ¬åœ°è¿è¡Œæ­£å¸¸
   - æäº¤æ‰€æœ‰æ›´æ”¹åˆ° Git
   - æ¨é€åˆ° GitHub

2. **éƒ¨ç½²åç«¯**ï¼ˆå…ˆéƒ¨ç½²åç«¯ï¼ï¼‰
   - é€‰æ‹©å¹³å°ï¼ˆRender/Railway/Fly.ioï¼‰
   - é…ç½®ç¯å¢ƒå˜é‡
   - ç­‰å¾…éƒ¨ç½²æˆåŠŸ
   - å¤åˆ¶åç«¯ URL

3. **æµ‹è¯•åç«¯ API**
   ```bash
   curl https://your-backend-url/health
   # ç¡®ä¿è¿”å›æ­£å¸¸
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   - åœ¨å‰ç«¯å¹³å°æ·»åŠ  `REACT_APP_API_URL`
   - å€¼ä¸ºåç«¯ URL

5. **éƒ¨ç½²å‰ç«¯**
   - é€‰æ‹©å¹³å°ï¼ˆVercel/Netlify/Cloudflareï¼‰
   - é…ç½®æ„å»ºè®¾ç½®
   - ç­‰å¾…éƒ¨ç½²æˆåŠŸ

6. **è¿æ¥å‰åç«¯**
   - æ›´æ–°åç«¯ CORS é…ç½®
   - æ·»åŠ å‰ç«¯åŸŸååˆ° `allowed_origins`
   - é‡æ–°éƒ¨ç½²åç«¯

7. **å®Œæ•´æµ‹è¯•**
   - è®¿é—®å‰ç«¯ URL
   - æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

8. **ç›‘æ§å’Œä¼˜åŒ–**
   - è®¾ç½®ç›‘æ§ï¼ˆUptime Robotï¼‰
   - æŸ¥çœ‹æ—¥å¿—
   - ä¼˜åŒ–æ€§èƒ½

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [VERCEL_DEPLOYMENT_GUIDE.md](VERCEL_DEPLOYMENT_GUIDE.md) - Vercel è¯¦ç»†éƒ¨ç½²æŒ‡å—
- [éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ.md](éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ.md) - å¿«é€Ÿéƒ¨ç½²æ­¥éª¤
- [TECHNICAL_SUMMARY.md](TECHNICAL_SUMMARY.md) - æŠ€æœ¯æ€»ç»“
- [å¿«é€Ÿå¯åŠ¨æŒ‡å—.md](å¿«é€Ÿå¯åŠ¨æŒ‡å—.md) - æœ¬åœ°å¼€å‘æŒ‡å—

---

## ğŸ†˜ è·å–å¸®åŠ©

### å®˜æ–¹æ–‡æ¡£
- [Vercel æ–‡æ¡£](https://vercel.com/docs)
- [Render æ–‡æ¡£](https://render.com/docs)
- [Railway æ–‡æ¡£](https://docs.railway.app)
- [Fly.io æ–‡æ¡£](https://fly.io/docs)
- [Cloudflare Pages æ–‡æ¡£](https://developers.cloudflare.com/pages)

### ç¤¾åŒºæ”¯æŒ
- [Vercel Community](https://github.com/vercel/vercel/discussions)
- [Render Community](https://community.render.com)
- [Railway Discord](https://discord.gg/railway)

### è§†é¢‘æ•™ç¨‹
- [YouTube: How to Deploy React to Vercel](https://www.youtube.com/results?search_query=deploy+react+vercel)
- [YouTube: FastAPI Deployment](https://www.youtube.com/results?search_query=deploy+fastapi)

---

## ğŸš€ å¼€å§‹éƒ¨ç½²

**å‡†å¤‡å¥½äº†å—ï¼Ÿé€‰æ‹©ä¸€ä¸ªæ–¹æ¡ˆå¼€å§‹å§ï¼**

1. ğŸ’° **é¢„ç®—æœ‰é™ï¼Ÿ** â†’ [æ–¹æ¡ˆ1](#æ–¹æ¡ˆ1vercel--render-å…è´¹)
2. ğŸ¯ **éœ€è¦ç¨³å®šï¼Ÿ** â†’ [æ–¹æ¡ˆ2](#æ–¹æ¡ˆ2vercel--railway-ä»˜è´¹ç¨³å®š)
3. ğŸŒ **å…¨çƒç”¨æˆ·ï¼Ÿ** â†’ [æ–¹æ¡ˆ3](#æ–¹æ¡ˆ3cloudflare-pages--flyio-é«˜æ€§ä»·æ¯”)
4. ğŸ‡¨ğŸ‡³ **å›½å†…ç”¨æˆ·ï¼Ÿ** â†’ [æ–¹æ¡ˆ4](#æ–¹æ¡ˆ4å›½å†…ä¼˜åŒ–æ–¹æ¡ˆ)
5. ğŸ”§ **å®Œå…¨æ§åˆ¶ï¼Ÿ** â†’ [æ–¹æ¡ˆ5](#æ–¹æ¡ˆ5docker--vps-å®Œå…¨æ§åˆ¶)

---

**ç‰ˆæœ¬ï¼š** 2.0  
**æ›´æ–°æ—¶é—´ï¼š** 2025-10-14  
**ç»´æŠ¤è€…ï¼š** Decision Assistant Team

**ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…ç›¸å…³æ–‡æ¡£æˆ–åœ¨ GitHub Issues ä¸­æé—®ã€‚

