# å¿«é€Ÿå¯åŠ¨æŒ‡å— âš¡

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### å‰ææ¡ä»¶

ç¡®ä¿å·²å®‰è£…ï¼š
- âœ… Python 3.8+
- âœ… Node.js 14+
- âœ… npm æˆ– yarn

---

## æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

### Windows ç”¨æˆ·

1. **åŒå‡»è¿è¡Œç°æœ‰çš„æ‰¹å¤„ç†æ–‡ä»¶ï¼š**
   ```
   å¯åŠ¨.bat
   ```

2. **æˆ–åˆ›å»ºæ–°çš„å¯åŠ¨è„šæœ¬ï¼š**

åˆ›å»º `start-dev.bat`ï¼š
```batch
@echo off
chcp 65001
echo ========================================
echo Decision Assistant - å¼€å‘ç¯å¢ƒå¯åŠ¨
echo ========================================
echo.

echo [1/4] æ£€æŸ¥ Python å’Œ Node.js...
python --version
node --version
echo.

echo [2/4] å¯åŠ¨åç«¯æœåŠ¡...
start cmd /k "cd backend && pip install -r requirements.txt && uvicorn app.main:app --reload"
echo åç«¯æœåŠ¡å¯åŠ¨ä¸­... (http://localhost:8000)
timeout /t 5 /nobreak >nul
echo.

echo [3/4] å¯åŠ¨å‰ç«¯æœåŠ¡...
start cmd /k "cd frontend && npm install && npm start"
echo å‰ç«¯æœåŠ¡å¯åŠ¨ä¸­... (http://localhost:3000)
echo.

echo [4/4] å®Œæˆï¼
echo.
echo ========================================
echo æœåŠ¡å·²å¯åŠ¨:
echo   - åç«¯ API: http://localhost:8000
echo   - å‰ç«¯ç•Œé¢: http://localhost:3000
echo   - API æ–‡æ¡£: http://localhost:8000/docs
echo ========================================
echo.
echo æŒ‰ä»»æ„é”®é€€å‡ºæ­¤çª—å£ï¼ˆä¸ä¼šå…³é—­æœåŠ¡ï¼‰...
pause >nul
```

### Mac/Linux ç”¨æˆ·

åˆ›å»º `start-dev.sh`ï¼š
```bash
#!/bin/bash

echo "========================================"
echo "Decision Assistant - å¼€å‘ç¯å¢ƒå¯åŠ¨"
echo "========================================"
echo ""

echo "[1/4] æ£€æŸ¥ Python å’Œ Node.js..."
python3 --version
node --version
echo ""

echo "[2/4] å¯åŠ¨åç«¯æœåŠ¡..."
cd backend
pip3 install -r requirements.txt
uvicorn app.main:app --reload &
BACKEND_PID=$!
cd ..
echo "åç«¯æœåŠ¡å¯åŠ¨ (PID: $BACKEND_PID)"
sleep 3
echo ""

echo "[3/4] å¯åŠ¨å‰ç«¯æœåŠ¡..."
cd frontend
npm install
npm start &
FRONTEND_PID=$!
cd ..
echo "å‰ç«¯æœåŠ¡å¯åŠ¨ (PID: $FRONTEND_PID)"
echo ""

echo "[4/4] å®Œæˆï¼"
echo ""
echo "========================================"
echo "æœåŠ¡å·²å¯åŠ¨:"
echo "  - åç«¯ API: http://localhost:8000"
echo "  - å‰ç«¯ç•Œé¢: http://localhost:3000"
echo "  - API æ–‡æ¡£: http://localhost:8000/docs"
echo "========================================"
echo ""
echo "è¦åœæ­¢æœåŠ¡ï¼Œè¿è¡Œ: ./stop-dev.sh"
echo "æˆ–æ‰‹åŠ¨åœæ­¢è¿›ç¨‹:"
echo "  Backend PID: $BACKEND_PID"
echo "  Frontend PID: $FRONTEND_PID"

# ä¿å­˜ PID ä»¥ä¾¿åç»­åœæ­¢
echo $BACKEND_PID > .backend.pid
echo $FRONTEND_PID > .frontend.pid
```

æ·»åŠ æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x start-dev.sh
./start-dev.sh
```

---

## æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆé€æ­¥ï¼‰

### æ­¥éª¤ 1ï¼šå¯åŠ¨åç«¯

æ‰“å¼€ç»ˆç«¯ 1ï¼š
```bash
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºæˆåŠŸï¼š
```
INFO:     Uvicorn running on http://127.0.0.1:8000
âœ“ AI-powered decision routes loaded successfully
âœ“ Chat storage initialized at: chat_data
```

### æ­¥éª¤ 2ï¼šå¯åŠ¨å‰ç«¯

æ‰“å¼€ç»ˆç«¯ 2ï¼š
```bash
cd frontend
npm install
npm start
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ `http://localhost:3000`

### æ­¥éª¤ 3ï¼šé›†æˆ ChatViewerï¼ˆå¦‚éœ€è¦ï¼‰

æŒ‰ç…§ `INTEGRATION_GUIDE.md` ä¿®æ”¹ `frontend/src/App.js`

---

## æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Dockerï¼ˆä¸€é”®å¯åŠ¨ï¼‰

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

æœåŠ¡åœ°å€ï¼š
- å‰ç«¯ï¼šhttp://localhost:3000
- åç«¯ï¼šhttp://localhost:8000

---

## âœ… éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸

### 1. æµ‹è¯•åç«¯ API

æ‰“å¼€æµè§ˆå™¨æˆ–ä½¿ç”¨ curlï¼š
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# åº”è¿”å›ï¼š
{"status":"healthy","service":"backend","ai":"DeepSeek"}
```

### 2. æµ‹è¯•å‰ç«¯

è®¿é—®ï¼šhttp://localhost:3000

åº”è¯¥çœ‹åˆ° Decision Assistant çš„ç•Œé¢

### 3. æµ‹è¯• ChatViewer API

```bash
# è·å–æ‰€æœ‰ä¼šè¯
curl http://localhost:8000/api/decisions/sessions

# åº”è¿”å› JSON æ•°ç»„
[
  {
    "session_id": "...",
    "created_at": "...",
    "message_count": 3,
    ...
  }
]
```

---

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

### å¼€å‘ç¯å¢ƒ

åˆ›å»º `frontend/.env.development`ï¼š
```env
REACT_APP_API_URL=http://localhost:8000
```

### ç”Ÿäº§ç¯å¢ƒ

åˆ›å»º `frontend/.env.production`ï¼š
```env
REACT_APP_API_URL=https://your-backend-url.onrender.com
```

### åç«¯ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `backend/.env`ï¼š
```env
# DeepSeek API Keyï¼ˆå¦‚æœéœ€è¦ï¼‰
DEEPSEEK_API_KEY=your_api_key_here

# èŠå¤©æ•°æ®å­˜å‚¨ç›®å½•
CHAT_DATA_DIR=chat_data

# æ•°æ®åº“é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
DATABASE_URL=sqlite:///./decision.db
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ï¼š** `Address already in use`

**è§£å†³ï¼š**

Windows:
```cmd
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8000
netstat -ano | findstr :3000

# ç»ˆæ­¢è¿›ç¨‹ï¼ˆæ›¿æ¢ PIDï¼‰
taskkill /PID <PID> /F
```

Mac/Linux:
```bash
# æŸ¥æ‰¾å¹¶ç»ˆæ­¢è¿›ç¨‹
lsof -ti:8000 | xargs kill -9
lsof -ti:3000 | xargs kill -9
```

### é—®é¢˜ 2ï¼šPython æ¨¡å—æœªæ‰¾åˆ°

**é”™è¯¯ï¼š** `ModuleNotFoundError: No module named 'fastapi'`

**è§£å†³ï¼š**
```bash
cd backend
pip install -r requirements.txt

# æˆ–ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Mac/Linux
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

### é—®é¢˜ 3ï¼šnpm ä¾èµ–å®‰è£…å¤±è´¥

**é”™è¯¯ï¼š** `npm ERR! ...`

**è§£å†³ï¼š**
```bash
cd frontend
rm -rf node_modules package-lock.json  # åˆ é™¤ç¼“å­˜
npm cache clean --force
npm install
```

### é—®é¢˜ 4ï¼šCORS é”™è¯¯

**é”™è¯¯ï¼š** `Access to fetch at 'http://localhost:8000' has been blocked by CORS`

**è§£å†³ï¼š**

æ£€æŸ¥ `backend/app/main.py` ä¸­çš„ CORS é…ç½®ï¼š
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # å¼€å‘ç¯å¢ƒå¯ä»¥ç”¨ "*"
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### é—®é¢˜ 5ï¼šä¸­æ–‡æ˜¾ç¤ºä¹±ç 

**PowerShell ä¹±ç ï¼š**
```powershell
chcp 65001
$OutputEncoding = [System.Text.Encoding]::UTF8
```

**JSON æ–‡ä»¶ä¹±ç ï¼š**
ç¡®ä¿æ–‡ä»¶ä¿å­˜ä¸º UTF-8 ç¼–ç ï¼ˆæ—  BOMï¼‰

---

## ğŸ“‹ å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. å¯åŠ¨æœåŠ¡
./start-dev.sh  # æˆ– start-dev.bat

# 2. ç¼–è¾‘ä»£ç 
# - åç«¯ï¼šbackend/ ç›®å½•ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
# - å‰ç«¯ï¼šfrontend/src/ ç›®å½•ï¼ˆè‡ªåŠ¨åˆ·æ–°ï¼‰

# 3. æµ‹è¯•åŠŸèƒ½
# æµè§ˆå™¨è®¿é—® http://localhost:3000

# 4. æŸ¥çœ‹æ—¥å¿—
# åç«¯ï¼šç»ˆç«¯ 1
# å‰ç«¯ï¼šç»ˆç«¯ 2

# 5. æäº¤ä»£ç 
git add .
git commit -m "æè¿°æ”¹åŠ¨"
git push
```

### æŸ¥çœ‹èŠå¤©è®°å½•

#### æ–¹å¼ 1ï¼šPowerShell è„šæœ¬
```powershell
.\ViewChatUTF8.ps1
```

#### æ–¹å¼ 2ï¼šWeb ç•Œé¢
1. å¯åŠ¨æœåŠ¡
2. è®¿é—® http://localhost:3000
3. ç‚¹å‡» "Chat Viewer" æ ‡ç­¾

#### æ–¹å¼ 3ï¼šç›´æ¥è¯»å– JSON
```bash
# ä½¿ç”¨ jq æ ¼å¼åŒ–æŸ¥çœ‹ï¼ˆéœ€è¦å®‰è£… jqï¼‰
cat chat_data/YOUR-SESSION-ID.json | jq .

# æˆ–ç®€å•æŸ¥çœ‹
cat chat_data/*.json
```

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤é€ŸæŸ¥è¡¨

### åç«¯ç›¸å…³

```bash
# å¯åŠ¨åç«¯
cd backend && uvicorn app.main:app --reload

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æŸ¥çœ‹ API æ–‡æ¡£
# æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8000/docs

# æµ‹è¯• API
curl http://localhost:8000/health
curl http://localhost:8000/api/decisions/sessions
```

### å‰ç«¯ç›¸å…³

```bash
# å¯åŠ¨å‰ç«¯
cd frontend && npm start

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æŸ¥çœ‹æ„å»ºç»“æœ
ls -lh build/
```

### Docker ç›¸å…³

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend
docker-compose logs -f frontend

# åœæ­¢æœåŠ¡
docker-compose down

# é‡æ–°æ„å»º
docker-compose up -d --build
```

---

## ğŸ“¦ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### Vercel éƒ¨ç½²ï¼ˆå‰ç«¯ï¼‰

```bash
cd frontend

# å®‰è£… Vercel CLI
npm install -g vercel

# ç™»å½•
vercel login

# éƒ¨ç½²
vercel --prod

# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆåœ¨ Vercel ç½‘ç«™ä¸Šï¼‰
REACT_APP_API_URL=https://your-backend.onrender.com
```

### Render éƒ¨ç½²ï¼ˆåç«¯ï¼‰

1. è®¿é—® https://render.com
2. è¿æ¥ GitHub ä»“åº“
3. åˆ›å»º Web Service
4. é…ç½®ï¼š
   ```
   Build: cd backend && pip install -r requirements.txt
   Start: cd backend && uvicorn app.main:app --host 0.0.0.0 --port $PORT
   ```
5. éƒ¨ç½²

---

## ğŸ‰ æˆåŠŸæ ‡å¿—

å½“ä½ çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼š

âœ… **åç«¯æˆåŠŸï¼š**
```
INFO:     Uvicorn running on http://127.0.0.1:8000
âœ“ AI-powered decision routes loaded successfully
âœ“ Chat storage initialized at: chat_data
âœ“ AI service ready: DeepSeek API
```

âœ… **å‰ç«¯æˆåŠŸï¼š**
```
Compiled successfully!

You can now view decision-assistant in the browser.

  Local:            http://localhost:3000
  On Your Network:  http://192.168.x.x:3000
```

âœ… **åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼š**
- èƒ½è®¿é—®å‰ç«¯ç•Œé¢
- èƒ½å‘é€èŠå¤©æ¶ˆæ¯
- èƒ½æŸ¥çœ‹èŠå¤©å†å²ï¼ˆChatViewerï¼‰
- èƒ½è¿›è¡Œå†³ç­–åˆ†æ

---

## ğŸ“ è·å–å¸®åŠ©

### æ–‡æ¡£å‚è€ƒ

- `æŠ€æœ¯æ€»ç»“-ç¬¬ä¸‰æ–¹å¼€å‘è€….md` - å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆ
- `TECHNICAL_SUMMARY.md` - è‹±æ–‡è¯¦ç»†æ–‡æ¡£
- `INTEGRATION_GUIDE.md` - ChatViewer é›†æˆæŒ‡å—

### æ—¥å¿—æ–‡ä»¶ä½ç½®

- åç«¯æ—¥å¿—ï¼šç»ˆç«¯è¾“å‡º
- å‰ç«¯æ—¥å¿—ï¼šæµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
- èŠå¤©æ•°æ®ï¼š`chat_data/*.json`

### å¸¸ç”¨è°ƒè¯•æŠ€å·§

1. **æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œï¼š**
   ```bash
   curl http://localhost:8000/health
   curl http://localhost:3000
   ```

2. **æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š**
   - åç«¯ï¼šæŸ¥çœ‹ç»ˆç«¯è¾“å‡º
   - å‰ç«¯ï¼šæ‰“å¼€æµè§ˆå™¨ DevTools (F12) â†’ Console

3. **æ¸…é™¤ç¼“å­˜é‡è¯•ï¼š**
   ```bash
   # å‰ç«¯
   cd frontend && rm -rf node_modules package-lock.json && npm install
   
   # åç«¯ï¼ˆä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰
   cd backend && rm -rf venv && python -m venv venv && source venv/bin/activate && pip install -r requirements.txt
   ```

---

**æœ€åæ›´æ–°ï¼š** 2025-10-13  
**ç‰ˆæœ¬ï¼š** 1.0  
**é€‚ç”¨äººå‘˜ï¼š** æ‰€æœ‰å¼€å‘è€…

